{"version":3,"sources":[null,"webpack:///D:/Projects/hello-uni/components/playPage/UniPlayPage.vue?a2af","webpack:///D:/Projects/hello-uni/components/playPage/UniPlayPage.vue?8823","webpack:///D:/Projects/hello-uni/components/playPage/UniPlayPage.vue?41a3","uni-app:///components/playPage/UniPlayPage.vue","webpack:///D:/Projects/hello-uni/components/playPage/UniPlayPage.vue?c92d","webpack:///D:/Projects/hello-uni/components/playPage/UniPlayPage.vue?bc97"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACsC;;;AAGhG;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwmB,CAAgB,qnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiD5nB;AACA,oG;;;;;AAKA;AACA;AACA,kBADA;AAEA,8BAFA,EADA;;AAKA,MALA,kBAKA;AACA;AACA,uDADA;AAEA,4BAFA;AAGA,qBAHA;;AAKA,GAXA;AAYA,SAZA,qBAYA;AACA;AACA;AACA,GAfA;AAgBA;AACA;AACA,uBADA;AAEA,uBAFA;AAGA,qBAHA;AAIA,iCAJA;AAKA,qCALA;AAMA,2CANA;AAOA,mCAPA;AAQA,yCARA;AASA,yCATA;AAUA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAfA;AAgBA,mBAhBA;AAiBA,2BAjBA,GADA;;;AAqBA,eArBA,yBAqBA;AACA;AACA;AACA,iCADA;AAEA,oCAFA;AAGA,oCAHA;;AAKA,KA5BA,GAhBA;;;AA+CA;AACA;AACA,6CADA;AAEA,gDAFA;AAGA,4CAHA;AAIA,+CAJA;AAKA,+CALA;AAMA,qCANA;AAOA,uCAPA,EADA;;;AAWA,UAXA,oBAWA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvBA;;AAyBA,YAzBA,oBAyBA,CAzBA,EAyBA;AACA;AACA;AACA;AACA,KA7BA;;AA+BA,cA/BA,sBA+BA,IA/BA,EA+BA;AACA;AACA;AACA,KAlCA;;AAoCA,mBApCA,6BAoCA;AACA;AACA,KAtCA,GA/CA;;AAuFA;AACA;AACA,oBAFA,4BAEA,GAFA,EAEA,MAFA,EAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,OALA,MAKA;AACA;AACA;AACA;;AAEA,OALA,MAKA;AACA;AACA;AACA;;AAEA,OALA,MAKA;AACA;AACA;AACA;;AAEA,OALA,MAKA;AACA;AACA;AACA;;AAEA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7CA,EAvFA,E;;;;;;;;;;;;ACvDA;AAAA;AAAA;AAAA;AAAqoC,CAAgB,ulCAAG,EAAC,C;;;;;;;;;;;ACAzpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/playPage/UniPlayPage.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./UniPlayPage.vue?vue&type=template&id=f106863c&scoped=true&\"\nvar renderjs\nimport script from \"./UniPlayPage.vue?vue&type=script&lang=js&\"\nexport * from \"./UniPlayPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UniPlayPage.vue?vue&type=style&index=0&id=f106863c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f106863c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/playPage/UniPlayPage.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./UniPlayPage.vue?vue&type=template&id=f106863c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./UniPlayPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./UniPlayPage.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"uni_play_page\">\r\n    <swiper class=\"swiper\"\r\n            vertical\r\n            circular\r\n            duration=\"200\"\r\n            @change=\"onChange\"\r\n            :current=\"getShowPageIndex\"\r\n            :class=\"[isShowSongQueue ? 'blur' : '']\">\r\n\r\n      <swiper-item class=\"item\"\r\n                   @click=\"onMask\"\r\n                   v-for=\"(item, index) in renderQueue\"\r\n                   :key=\"index\">\r\n\r\n        <image :src=\"item.picUrl + '?param=400y400'\"\r\n               class=\"img\" mode=\"aspectFill\"\r\n               :class=\"[(!getIsPlay && getShowPageIndex === index) && 'mask iconfont icon-audioPlay']\">\r\n        </image>\r\n\r\n        <prepare-img :fz=\"22\"></prepare-img>\r\n\r\n        <view class=\"song_info\" v-if=\"getCurrentSong\">\r\n          <uni-tag :tag=\"tag\"></uni-tag>\r\n          <view class=\"song_detail\">\r\n            <view class=\"info\">\r\n              <view class=\"name\">{{ item.name }}</view>\r\n              <view class=\"singer\">{{ item.singer }}</view>\r\n            </view>\r\n            <view class=\"control\">\r\n              <view class=\"iconfont icon-heart\"\r\n                    @click.stop=\"onColSongs(item)\"\r\n                    :class=\"[item.isCollect ? 'active' : '']\"></view>\r\n              <view class=\"iconfont icon-more\"\r\n                    @click.stop=\"onShowSongQueue\">\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </swiper-item>\r\n    </swiper>\r\n\r\n    <!--  歌曲播放队列  -->\r\n    <uni-song-queue v-if=\"isActive\" :isShow.sync=\"isShowSongQueue\"></uni-song-queue>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapMutations} from \"vuex\";\r\nimport types from \"@/store/mutations-types\";\r\n\r\nimport UniTag from \"../tag/UniTag\";\r\nimport UniSongQueue from \"../songQueue/UniSongQueue\";\r\n\r\nexport default {\r\n  components: {\r\n    UniTag,\r\n    UniSongQueue\r\n  },\r\n  data() {\r\n    return {\r\n      tag: ['+歌曲故事', '#New Wave', '#Hot', '#Moo Daily'],\r\n      isShowSongQueue: false,\r\n      isActive: false,\r\n    }\r\n  },\r\n  created() {\r\n    const pages = getCurrentPages(), page = pages[pages.length - 1];\r\n    this.route = page.route;\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      getIsInit: 'isInit',\r\n      getIsPlay: 'isPlay',\r\n      getAudio: 'audio',\r\n      getCurrentSong: 'currentSong',\r\n      getShowPageIndex: 'showPageIndex',\r\n      getCurrentPlayIndex: 'currentPlayIndex',\r\n      getTopPageIndex: 'topPageIndex',\r\n      getMiddlePageIndex: 'middlePageIndex',\r\n      getBottomPageIndex: 'bottomPageIndex',\r\n      getCurrentPlayQueue: state => {\r\n        state.currentPlayQueue.forEach(v => {\r\n          if (state.colSongs[v.id] != null) v.isCollect = true;\r\n        });\r\n        return state.currentPlayQueue;\r\n      },\r\n      getLock: 'lock',\r\n      getColSongs: 'colSongs'\r\n    }),\r\n\r\n    renderQueue() {\r\n      const queue = this.getCurrentPlayQueue;\r\n      return [\r\n          queue[this.getTopPageIndex],\r\n          queue[this.getMiddlePageIndex],\r\n          queue[this.getBottomPageIndex]\r\n      ];\r\n    }\r\n\t\t\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n        types.SET_SHOW_PAGE_INDEX,\r\n        types.SET_CURRENT_PLAY_INDEX,\r\n        types.SET_TOP_PAGE_INDEX,\r\n        types.SET_MIDDLE_PAGE_INDEX,\r\n        types.SET_BOTTOM_PAGE_INDEX,\r\n        types.SET_IS_INIT,\r\n        types.SET_COL_SONGS,\r\n    ]),\r\n\r\n    onMask() {\r\n      if (this.getIsPlay) {\r\n        this.getAudio.pause();\r\n      } else{\r\n        // 如果是app初始化时点击就发出请求\r\n        if (!this.getIsInit) {\r\n          this[types.SET_IS_INIT]();\r\n          this.$store.dispatch('getPlaySong', this.getCurrentSong);\r\n          return;\r\n        }\r\n        this.getAudio.play()\r\n      }\r\n    },\r\n\r\n    onChange(e) {\r\n      if (this.getLock)return;\r\n      this[types.SET_SHOW_PAGE_INDEX](e.detail.current);\r\n      console.log(`change`);\r\n    },\r\n\r\n    onColSongs(item) {\r\n      item.isCollect = !item.isCollect;\r\n      this[types.SET_COL_SONGS](item);\r\n    },\r\n\r\n    onShowSongQueue() {\r\n      this.isShowSongQueue = this.isActive = true;\r\n    },\r\n  },\r\n  watch: {\r\n    // 动态加载播放页面\r\n    getShowPageIndex(val, oldVal) {\r\n      // 避免多次触发函数，执行完毕后会发出网络请求直到请求结束才会解锁\r\n      if (this.getLock)return;\r\n\r\n      let playIndex = this.getCurrentPlayIndex;\r\n      const last = this.getCurrentPlayQueue.length - 1;\r\n\r\n      // 滑动窗口变化的6种情况，动态改变指针（保证初始化时只渲染 3页，而每次切歌只重绘 1页）\r\n      if (oldVal === 1 && val === 2) {\r\n        // console.log(oldVal, val, `下一曲`, playIndex);\r\n        playIndex = playIndex === last ? 0 : playIndex + 1;\r\n        this[types.SET_TOP_PAGE_INDEX](playIndex === last ? 0 : playIndex + 1);\r\n\r\n      } else if (oldVal === 2 && val === 0) {\r\n        // console.log(oldVal, val, `下一曲`, playIndex);\r\n        playIndex = playIndex === last ? 0 : playIndex + 1;\r\n        this[types.SET_MIDDLE_PAGE_INDEX](playIndex === last ? 0 : playIndex + 1);\r\n\r\n      } else if (oldVal === 0 && val === 1) {\r\n        // console.log(oldVal, val, `下一曲`, playIndex);\r\n        playIndex = playIndex === last ? 0 : playIndex + 1;\r\n        this[types.SET_BOTTOM_PAGE_INDEX](playIndex === last ? 0 : playIndex + 1);\r\n\r\n      } else if (oldVal === 1 && val === 0) {\r\n        // console.log(oldVal, val, `上一曲`, playIndex);\r\n        playIndex = playIndex === 0 ? last : playIndex - 1;\r\n        this[types.SET_BOTTOM_PAGE_INDEX](playIndex === 0 ? last : playIndex - 1);\r\n\r\n      } else if (oldVal === 0 && val === 2) {\r\n        // console.log(oldVal, val, `上一曲`, playIndex);\r\n        playIndex = playIndex === 0 ? last : playIndex - 1;\r\n        this[types.SET_MIDDLE_PAGE_INDEX](playIndex === 0 ? last : playIndex - 1);\r\n\r\n      } else if (oldVal === 2 && val === 1) {\r\n        // console.log(oldVal, val, `上一曲`, playIndex);\r\n        playIndex = playIndex === 0 ? last : playIndex - 1;\r\n        this[types.SET_TOP_PAGE_INDEX](playIndex === 0 ? last : playIndex - 1);\r\n      }\r\n      console.log(playIndex);\r\n      // 切歌后发出请求歌曲 url\r\n      this.$store.dispatch('getPlaySong', this.getCurrentPlayQueue[playIndex]);\r\n      // 修改当前播放队列歌曲 index\r\n      this[types.SET_CURRENT_PLAY_INDEX](playIndex);\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .uni_play_page{\r\n    @include wh(100%, 100%);\r\n    position: relative;\r\n\r\n    .blur{\r\n      filter: blur(20px);\r\n    }\r\n    .swiper{\r\n      @include wh(100%, 100%);\r\n      position: absolute;\r\n\r\n      .item{\r\n        position: absolute;\r\n        @include wh(100%, 100%);\r\n\r\n        .img{\r\n          @include wh(100%, 100%);\r\n          will-change: transform;\r\n        }\r\n\r\n        .song_info{\r\n          @include wh(90%, 25%);\r\n          position: absolute;\r\n          bottom: 10%;\r\n          left: 50%;\r\n          transform: translate3d(-50%, -10%, 0);\r\n\r\n          .song_detail{\r\n            width: $container-size;\r\n            margin: 0 auto;\r\n            height: 65%;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            color: $font-color-white;\r\n            .info{\r\n              flex: 2.5;\r\n              .name{\r\n                font-size: 48rpx;\r\n                font-weight: bold;\r\n              }\r\n              .singer{\r\n                font-size: 38rpx;\r\n                margin-top: 20rpx;\r\n              }\r\n            }\r\n            .control {\r\n              flex: 1;\r\n              text-align: center;\r\n              .iconfont {\r\n                font-size: $icon-size;\r\n              }\r\n              .icon-more{\r\n                margin-top: 20rpx;\r\n              }\r\n              .active{\r\n                color: $bgc-collection;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /*.songQueue{\r\n      @include wh(100%, 100%);\r\n      position: absolute;\r\n      z-index: 1000;\r\n      transition: all .5s ease;\r\n\r\n      .icon-arrow{\r\n        position: absolute;\r\n        left: 50%;\r\n        transform: translateX(-50%) rotate(90deg);\r\n        color: $font-color-white;\r\n      }\r\n\r\n      .box{\r\n        @include wh(100%, 100%);\r\n        position: absolute;\r\n        background-color: rgba(0, 0, 0, .2);\r\n\r\n        .detail{\r\n          @include wh(100%, 45%);\r\n        }\r\n\r\n        .control{\r\n          position: absolute;\r\n          top: 45%;\r\n          left: 3%;\r\n        }\r\n\r\n        .scroll{\r\n          @include wh(100%, 100%);\r\n          position: absolute;\r\n          top: 53%;\r\n          color: $font-color-white;\r\n          font-size: 40rpx;\r\n\r\n          .view_item{\r\n            width: 90%;\r\n            margin: 0 auto;\r\n            padding-bottom: 900rpx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .show{\r\n      transform: translate3d(0, 0, 0);\r\n    }\r\n    .hide{\r\n      transform: translate3d(100%, 100%, 0);\r\n    }*/\r\n  }\r\n  .mask::after{\r\n    content: '';\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0,0,0,.3);\r\n    z-index: 999;\r\n  }\r\n  .mask::before{\r\n    content: \"\\e734\";\r\n    color: $font-color-white;\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    z-index: 1000;\r\n    transform: translate3d(-50%, -50%, 0);\r\n    font-size: 100rpx;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./UniPlayPage.vue?vue&type=style&index=0&id=f106863c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./UniPlayPage.vue?vue&type=style&index=0&id=f106863c&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1618300590028\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}